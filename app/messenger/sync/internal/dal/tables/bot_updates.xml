<?xml version="1.0" encoding="UTF-8"?>
<table sqlname="bot_updates">
    <operation name="Insert">
        <sql>
            INSERT INTO bot_updates
                (bot_id, update_id, update_type, update_data, date2)
            VALUES
                (:bot_id, :update_id, :update_type, :update_data, :date2)
        </sql>
    </operation>

    <operation name="SelectByLastUpdateId">
        <sql>
            SELECT
                bot_id, update_id, update_type, update_data, date2
            FROM
                bot_updates
            WHERE
                bot_id = :bot_id
            ORDER BY update_id DESC LIMIT 1
        </sql>
    </operation>

    <operation name="SelectByGtUpdateId" result_set="list">
        <params>
            <param name="limit" type="int32" />
        </params>
        <sql>
            SELECT
                bot_id, update_id, update_type, update_data, date2
            FROM
                bot_updates
            WHERE
                bot_id = :bot_id AND update_id > :update_id
            ORDER BY update_id LIMIT :limit
        </sql>
    </operation>
</table>
